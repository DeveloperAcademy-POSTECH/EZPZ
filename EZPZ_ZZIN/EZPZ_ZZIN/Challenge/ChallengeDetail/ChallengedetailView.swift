//
//  SwiftUIView.swift
//  ChallengeComplete
//
//  Created by Ïù¥Ï£ºÌôî on 2022/04/08.
//

import SwiftUI

struct ChallengedetailView: View {
    @State var firstCheck = false
    @State var secondCheck = false
    @State var thirdCheck = false
    @State var fourthCheck = false
    @State var fifthCheck = false
    @State var sixthCheck = false
    @State var checkBool = false
    @State private var showingActionSheet = false
    @State private var showAlert = false
    @State var ChallengedetailViewisPresented: Bool = false
    
    var body: some View {
        ZStack{
            ColorManage.ezpzBlack
                .ignoresSafeArea()
            ScrollView() {
                VStack{
                    HStack{
                        Text("2022ÎÖÑ 3Ïõî")
                            .font(.custom("SpoqaHanSansNeo-Bold",size: 17))
                            .foregroundColor(ColorManage.ezpzLightgrey)
                    }
                    VStack{
                        Group{
                            HStack{
                                Text("üö¥‚Äç‚ôÄÔ∏è 100Ïùº ÎèôÏïà 5kg ÎπºÍ∏∞")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 28))
                                    .foregroundColor(ColorManage.ezpzLightgrey)
                                    .multilineTextAlignment(.leading).padding([.leading], 17).padding(.bottom,2)
                                Spacer()
                                Button(action: {
                                    //add action
                                }) {
                                    Image(systemName: "gearshape")
                                        .padding(.trailing, 17.0)
                                        .foregroundColor(ColorManage.ezpzLightgrey)
                                }
                                
                            }
                            HStack{
                                Text("2022.03.12~2022.05.30")
                                    .font(.custom("SpoqaHanSansNeo-Regular",size: 17))
                                    .foregroundColor(ColorManage.ezpzLightgrey)
                                    .padding(.leading, 17)
                                Spacer()
                            }.padding(.bottom, 10)
                        }
                        if (firstCheck){
                            Button(action: {
                                print("Ïò§Îäò Ìïú Ïùº ÎèåÏïÑÎ≥¥Í∏∞")
                            }) {
                                Text("Ïò§Îäò Ìïú Ïùº ÎèåÏïÑÎ≥¥Í∏∞")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 17))
                                    .frame(width: 356 , height: 40)
                                    .foregroundColor(ColorManage.ezpzLime)
                                    .background(ColorManage.ezpzDarkgrey)
                                    .cornerRadius(10)
                            }
                        }
                    }.padding([.top,.bottom], 20)
                    
                    VStack{
                        Group{
                            HStack{
                                Text("üìç Ïò§Îäò Ìï† Ïùº")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 18))
                                    .foregroundColor(ColorManage.ezpzLime)
                                    .lineLimit(1).padding(.leading, 17.0)
                                    .padding([.bottom], 5)
                                Spacer()
                            }
                            Divider()
                                .background(ColorManage.ezpzLightgrey)
                            ForEach(1..<7) { i in
                                
                                CheckboxField1(id: "ÏÇ¨Ïù¥ÌÅ¥ 30Î∂Ñ ÌÉÄÍ∏∞", label: "ÏÇ¨Ïù¥ÌÅ¥ 30Î∂Ñ ÌÉÄÍ∏∞", isMarked: $firstCheck).padding(.leading , 17).padding([.top, .bottom], 6)
                                Divider()
                                    .background(ColorManage.ezpzSmokegrey)
                            }
                            Button(action: {
                                ChallengedetailViewisPresented.toggle()
                            }) {
                            HStack{
                                Text("+    Ìï† Ïùº Ï∂îÍ∞ÄÌïòÍ∏∞")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 17))
                                    .foregroundColor(ColorManage.ezpzSmokegrey)
                                    .multilineTextAlignment(.leading).padding([.leading], 20)
                                Spacer()
                            }
                            }
                            Divider()
                                .background(ColorManage.ezpzSmokegrey)
                        }
                        
                    }
                    .padding(.bottom, 25)
                    VStack{
                        Group{
                            HStack{
                                Text("üö¥‚Äç‚ôÄÔ∏è 12Ïãú Ïù¥ÌõÑ Î∞©Ìï¥Í∏àÏßÄ Î™®Îìú ÏÑ§Ï†ïÌïòÍ∏∞")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 18))
                                    .foregroundColor(ColorManage.ezpzLime)
                                    .lineLimit(1).padding(.leading, 17.0)
                                    .padding([.top,.bottom], 5)
                                Spacer()
                            }
                            Divider()
                                .background(ColorManage.ezpzLightgrey)
                            ForEach(1..<7) { i in
                                CheckboxField1(id: "ÏÇ¨Ïù¥ÌÅ¥ 30Î∂Ñ ÌÉÄÍ∏∞", label: "ÏÇ¨Ïù¥ÌÅ¥ 30Î∂Ñ ÌÉÄÍ∏∞", isMarked: $firstCheck).padding(.leading , 17).padding([.top, .bottom], 6)
                                Divider()
                                    .background(ColorManage.ezpzSmokegrey)
                            }
                            Button(action: {
                                ChallengedetailViewisPresented.toggle()
                            }) {
                            HStack{
                                Text("+    Ìï† Ïùº Ï∂îÍ∞ÄÌïòÍ∏∞")
                                    .font(.custom("SpoqaHanSansNeo-Bold",size: 17))
                                    .foregroundColor(ColorManage.ezpzSmokegrey)
                                    .multilineTextAlignment(.leading).padding([.leading], 20)
                                Spacer()
                            }
                            }
                            Divider()
                                .background(ColorManage.ezpzSmokegrey)
                                .sheetResize(
                                    isPresented: $ChallengedetailViewisPresented,
                                    detents: [.medium(),.large()]
                                ) {
                                } content: {
                                    TodoeditView()
                                }
                        }
                    }
                    
                    Spacer()
                }
            }
        }
    }
}

struct ChallengedetailView_Previews: PreviewProvider {
    static var previews: some View {
        ChallengedetailView()
    }
}

struct CheckboxField1: View {
    let id: String       //Î≥ÄÏàò ÌÉÄÏûÖ ÏÑ†Ïñ∏
    let label: String
    let size: CGFloat
    let color: Color
    let textSize: Int
    
    @Binding var isMarked: Bool
    @State private var showingActionSheet = false
    @State private var showAlert = false
    @State var ChallengedetailViewisPresented: Bool = false
    @State var mondayCheck = false
    @State var tuesdayCheck = false
    @State var wednesdayCheck = false
    @State var thursdayCheck = false
    @State var fridayCheck = false
    @State var saturdayCheck = false
    @State var sundayCheck = false
    
    init(
        id: String,
        label:String,
        size: CGFloat = 15,
        color: Color = ColorManage.ezpzPink,
        textSize: Int = 17,
        isMarked: Binding<Bool>
    ) {
        self.id = id
        self.label = label
        self.size = size
        self.color = color
        self.textSize = textSize
        self._isMarked = isMarked
    }
    
    
    var body: some View {
        Button(action:{
            isMarked.toggle()
        }) {
            HStack(alignment: .center, spacing: 10) {
                if (isMarked){
                    Image(systemName: "checkmark.square")
                        .resizable()
                        .aspectRatio(contentMode: .fit)
                        .frame(width: 20, height: 20)
                } else{
                    Image(systemName: "square")
                        .renderingMode(.original)
                        .resizable()
                        .aspectRatio(contentMode: .fit)
                        .frame(width: 20, height: 20)
                }
                if (self.isMarked){
                    Text(label)
                        .font(.custom("SpoqaHanSansNeo-Regular",size: size))
                        .foregroundColor(ColorManage.ezpzLightgrey)
                        .strikethrough()
                } else{
                    Text(label)
                        .font(.custom("SpoqaHanSansNeo-Regular",size: size))
                        .foregroundColor(ColorManage.ezpzLightgrey)
                }
                Spacer()
                Button(action: {self.showingActionSheet.toggle()}) {
                    Image(systemName: "ellipsis")
                        .padding(.trailing, 17.0)
                        .foregroundColor(ColorManage.ezpzPink)
                }
                .confirmationDialog(
                    "ÎèÑÏ†ÑÎ™Ö Î≥ÄÍ≤Ω Î∞è ÎèÑÏ†Ñ Í∏∞Í∞ÑÏùÑ ÏàòÏ†ïÌï† Ïàò ÏûàÏñ¥Ïöî!",
                    isPresented: $showingActionSheet,
                    actions: {
                        Button("ÎèÑÏ†Ñ ÏàòÏ†ïÌïòÍ∏∞") {
                            ChallengedetailViewisPresented.toggle()
                        }
                        
                        Button("ÎèÑÏ†Ñ ÏÇ≠Ï†úÌïòÍ∏∞", role: .destructive ) {
                            showAlert = true
                        }
                        Button("Cancel", role: .cancel) { }
                    })
                .alert(isPresented: $showAlert) {
                    Alert(title: Text("Ìï† ÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†Ïñ¥Ïöî?"), message: Text("Ìïú Î≤à ÏßÄÏö¥ Ìï† ÏùºÏùÄ Î≥µÍµ¨Ìï† Ïàò ÏóÜÏñ¥Ïöî..."), primaryButton: .destructive(Text("ÏÇ≠Ï†úÌïòÍ∏∞"), action: {
                        //some action
                        
                    } ), secondaryButton: .cancel(Text("ÎèåÏïÑÍ∞ÄÍ∏∞")))
                }
            }.foregroundColor(self.color)
        }
        .sheetResize(
            isPresented: $ChallengedetailViewisPresented,
            detents: [.medium(),.large()]
        ) {
        } content: {
            TodoeditView()
        }
    }
    
}
